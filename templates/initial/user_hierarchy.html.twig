{% extends eau.templatePath('layout') %}

{% block head_stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('vendor/TreeDataNext/TreeDataNext.css') }}">
{% endblock %}

{% block search_wrapper %}
    {% include eau.templatePath('section/search') %}
{% endblock %}

{% block main %}
    <div class="container">
        <div class="row mb-5">

            <div class="col-xl-8 mb-4">

                {% block nodes_item %}
                    <div class="nodes-item {{ nodes_class|default('mb-3') }}">
                        <div id="tree-nodes" class="overflow-auto py-3"></div>
                    </div>
                {% endblock %}

                <div class="border p-4">
                    <h5 class="fw-light mb-3">
                        <i class="fas fa-sitemap me-2"></i> Referrals
                    </h5>
                    <div class='text-bg-success opacity-50 mb-2 p-2 rounded'>
                        Anchor &lt;{{ node.email }}&gt;
                    </div>
                    {% block table %}
                        {% include 'utility/table.html.twig' with {table: table} %}
                    {% endblock %}
                </div>

            </div>
            
            <div class="col-xl-4">
                <h5>Linear Tree View</h5>
                <hr>
                <div class="border p-3">
                    <div class="tree-list overflow-auto" id="tree-list"></div>
                </div>
            </div>
            
        </div>
    </div>
{% endblock %}

{% block body_javascript %}
    {{ parent() }}
    <div data-node-structure="{{ structure|raw }}"></div>
    <script src="{{ asset('vendor/TreeDataNext/TreeDataNext.js') }}"></script>
    <script type="module" src="{{ asset('resource/js/hierarchy.js') }}"></script>
{% endblock %}